#!/bin/bash

COLOR2="\033[1;38;5;213m"  # Bold magenta
RESET="\033[0m"
COLOR3="\033[1;38;5;213m"  # Same color as banner

# Inline new ASCII logo
ascii_logo=(
"                 *+++*+*"
"             ++   +   +   **"
"        ++   +++++     ++++*   **"
"     +      ++             ++      *"
"        ++                     **"
"    +  +       ++++++++++*       *  *"
"   + + +       +++++++++++       + * *"
"  +  ++       ++++++ ++++++       ++  *"
"     ++       +++++   +++++       ++"
" +   +        ++++     ++++        +   *"
"* **         ++++++   ++++++         *+ +"
"* **         +++        *+++         *+ +"
" *   *      *+++         +++       +   +"
"     **     +++*         ++++     ++"
"  *  **     +++           +++     ++  +"
"   * * *  *++++           +++++  + + +"
"    *  *                         +  +"
"        *#                      +"
"     #      **             ++      +"
"        **   *****     +++++   ++"
"             **   *   *   ++"
"                 *******"
)

# AxOS banner
banner_lines=(
"░█████╗░██╗░░██╗░█████╗░░██████╗"
"██╔══██╗╚██╗██╔╝██╔══██╗██╔════╝"
"███████║░╚███╔╝░██║░░██║╚█████╗░"
"██╔══██║░██╔██╗░██║░░██║░╚═══██╗"
"██║░░██║██╔╝╚██╗╚█████╔╝██████╔╝"
"╚═╝░░╚═╝╚═╝░░╚═╝░╚════╝░╚═════╝░"
)

# Print logo + banner side by side
echo
for i in "${!ascii_logo[@]}"; do
    printf "${COLOR2}%-50s  %-40s${RESET}\n" "${ascii_logo[i]}" "${banner_lines[i]:-}"
done
echo

# System info
OS="AxOS (Arch-based)"
KERNEL="$(uname -r)"
UPTIME="$(uptime -p)"
SHELL="$SHELL"
DE="${XDG_CURRENT_DESKTOP:-$DESKTOP_SESSION}"
TERM="$TERM"
CPU="$(grep -m1 'model name' /proc/cpuinfo | cut -d ':' -f2 | xargs)"
RAM="$(free -h | awk '/Mem:/ {print $3 "/" $2}')"
PKGS="$(pacman -Q | wc -l)"
STORAGE="$(df -h / | awk 'NR==2 {print $3 "/" $2}')"

# Collect info lines
info_lines=(
  "OS: $OS"
  "Kernel: $KERNEL"
  "Uptime: $UPTIME"
  "Shell: $SHELL"
  "DE: $DE"
  "Terminal: $TERM"
  "CPU: $CPU"
  "RAM: $RAM"
  "Packages: $PKGS"
  "Storage: $STORAGE"
)

# Find longest line length
max_len=0
for line in "${info_lines[@]}"; do
  (( ${#line} > max_len )) && max_len=${#line}
done

box_width=$((max_len + 4)) # padding + borders

# Print top border
printf "${COLOR2}╭%s╮${RESET}\n" "$(printf '─%.0s' $(seq 1 $((box_width - 2))))"

# Print each line with colored labels matching the banner
for line in "${info_lines[@]}"; do
  label="${line%%:*}:"
  value="${line#*:}"
  printf "${COLOR3}│ ${COLOR3}%-10s${RESET}%-*s ${COLOR2}│${RESET}\n" "$label" $((box_width - 14)) "$value"
done

# Print bottom border
printf "${COLOR2}╰%s╯${RESET}\n" "$(printf '─%.0s' $(seq 1 $((box_width - 2))))"
