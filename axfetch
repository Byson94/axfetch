#!/bin/bash

COLOR1="\033[38;5;213m"  # Bright magenta-pink
COLOR2="\033[38;5;213m"
RESET="\033[0m"
SCRIPT_DIR="$(dirname "$(realpath "$0")")"

# Read ASCII logo and banner into arrays
mapfile -t ascii_logo < "$SCRIPT_DIR/axos.txt"

banner_lines=(
  "░█████╗░██╗░░██╗░█████╗░░██████╗"
  "██╔══██╗╚██╗██╔╝██╔══██╗██╔════╝"
  "███████║░╚███╔╝░██║░░██║╚█████╗░"
  "██╔══██║░██╔██╗░██║░░██║░╚═══██╗"
  "██║░░██║██╔╝╚██╗╚█████╔╝██████╔╝"
  "╚═╝░░╚═╝╚═╝░░╚═╝░╚════╝░╚═════╝░"
)

# Determine max lines between logo and banner
max_lines=${#ascii_logo[@]}
if (( ${#banner_lines[@]} > max_lines )); then
  max_lines=${#banner_lines[@]}
fi

# Print logo left, banner right
echo
for ((i = 0; i < max_lines; i++)); do
  logo_line="${ascii_logo[i]:-}"
  banner_line="${banner_lines[i]:-}"
  # Replace placeholders if any
  logo_line="${logo_line//\$1/$COLOR1}"
  logo_line="${logo_line//\$2/$COLOR2}"
  echo -e "${logo_line:-}  ${COLOR1}${banner_line}${RESET}"
done

# Spacer
echo

# Box Top Border
echo -e "${COLOR1}╭────────────────────────────────────────────────────────────────────────────╮${RESET}"

# System Info Block: 3 columns
printf "${COLOR1}│${RESET} %-20s %-30s %-20s ${COLOR1}│\n" \
  "OS: AxOS (Arch-based)" \
  "Kernel: $(uname -r)" \
  "Uptime: $(uptime -p)"
printf "${COLOR1}│${RESET} %-20s %-30s %-20s ${COLOR1}│\n" \
  "Shell: $SHELL" \
  "WM/DE: ${XDG_CURRENT_DESKTOP:-$DESKTOP_SESSION}" \
  "Terminal: $TERM"
printf "${COLOR1}│${RESET} %-20s %-30s %-20s ${COLOR1}│\n" \
  "CPU: $(grep -m1 'model name' /proc/cpuinfo | cut -d ':' -f2 | xargs)" \
  "RAM: $(free -h | awk '/Mem:/ {print $3 "/" $2}')" \
  "Packages: $(pacman -Q | wc -l)"
printf "${COLOR1}│${RESET} %-20s %-30s %-20s ${COLOR1}│\n" \
  "Storage: $(df -h / | awk 'NR==2 {print $3 "/" $2}')" \
  "" "" # Fillers

# Box Bottom Border
echo -e "${COLOR1}╰────────────────────────────────────────────────────────────────────────────╯${RESET}"
