#!/bin/bash

# Colors
COLOR="\033[38;5;213m"     # Magenta-pink
BOLD_COLOR="\033[1;38;5;213m"
RESET="\033[0m"
SCRIPT_DIR="$(dirname "$(realpath "$0")")"

# Read ASCII logo into an array
mapfile -t logo_lines < "$SCRIPT_DIR/axos.txt"

# AxOS banner
banner_lines=(
"░█████╗░██╗░░██╗░█████╗░░██████╗"
"██╔══██╗╚██╗██╔╝██╔══██╗██╔════╝"
"███████║░╚███╔╝░██║░░██║╚█████╗░"
"██╔══██║░██╔██╗░██║░░██║░╚═══██╗"
"██║░░██║██╔╝╚██╗╚█████╔╝██████╔╝"
"╚═╝░░╚═╝╚═╝░░╚═╝░╚════╝░╚═════╝░"
)

# Print logo + banner side by side
for i in {0..25}; do
    printf "${COLOR}%-40s" "${logo_lines[i]}"
    [[ $i -lt ${#banner_lines[@]} ]] && printf "%s" "${banner_lines[i]}"
    echo -e "${RESET}"
done

echo

# Gather system info
OS="AxOS (Arch-based)"
KERNEL="$(uname -r)"
UPTIME="$(uptime -p | sed 's/up //')"
SHELL="$SHELL"
WM="${XDG_CURRENT_DESKTOP:-$DESKTOP_SESSION}"
TERM="$TERM"
CPU="$(grep -m1 'model name' /proc/cpuinfo | cut -d ':' -f2 | xargs)"
RAM="$(free -h | awk '/Mem:/ {print $3 "/" $2}')"
PKGS="$(pacman -Q | wc -l)"
STORAGE="$(df -h / | awk 'NR==2 {print $3 "/" $2}')"

# Build info lines
info_lines=(
"│ ${BOLD_COLOR}OS:${RESET} $OS   ${BOLD_COLOR}Kernel:${RESET} $KERNEL   ${BOLD_COLOR}Uptime:${RESET} $UPTIME"
"│ ${BOLD_COLOR}Shell:${RESET} $SHELL   ${BOLD_COLOR}WM/DE:${RESET} $WM   ${BOLD_COLOR}Terminal:${RESET} $TERM"
"│ ${BOLD_COLOR}CPU:${RESET} $CPU   ${BOLD_COLOR}RAM:${RESET} $RAM   ${BOLD_COLOR}Packages:${RESET} $PKGS"
"│ ${BOLD_COLOR}Storage:${RESET} $STORAGE"
)

# Determine box width
BOX_WIDTH=70
TOP_BORDER="╭$(printf '─%.0s' $(seq 1 $((BOX_WIDTH - 2))))╮"
BOTTOM_BORDER="╰$(printf '─%.0s' $(seq 1 $((BOX_WIDTH - 2))))╯"

# Print box
echo -e "${COLOR}${TOP_BORDER}${RESET}"
for line in "${info_lines[@]}"; do
    printf "${COLOR}%-*s${RESET}\n" "$BOX_WIDTH" "$line│"
done
echo -e "${COLOR}${BOTTOM_BORDER}${RESET}"
